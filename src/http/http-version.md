## HTTP 1.0/1.1/2.0

### HTTP 1.0
浏览器与服务器只保持短暂的连接，每次请求都需要与服务器建立一个TCP连接，服务器完成请求后立即断开TCP连接，服务器不跟踪每个客户，也不记录过去的请求

如果需要建立长连接，需要设置一个非标准的Connection字段 `Connection: keep-alive`

### HTTP 1.1
默认支持长连接

不用等待上次请求结果返回，就可以发出下一次请求，但服务端必须按照接收到请求的顺序先后依次返回响应结果，保证客户端能够区分出每次请求的响应内容，显著减少整个下载过程所需要的时间

HTTP1.1在HTTP1.0基础上，增加了更多的请求头和响应头来完善功能
* 引入了更多缓存控制策略，If-Unmodified-Since, If-Match, If-none-Match等缓存头来控制缓存策略

* 引入range，允许值请求资源某个部分

* 引入host，实现了在一台web服务器上可以在同一个IP地址和端口号上使用不同的主机名来创建更多个虚拟web站点

* 还添加了其他请求方法：put, delete, options

### HTTP 2.0
性能上有很大提升

#### 多路复用
HTTP/2 复用 TCP 连接，在一个连接里，客户端和浏览器都可以同时发送多个请求或响应，而且不用按照顺序一一对应，这样就避免了对头堵塞

#### 二进制分帧
帧是HTTP/2通信中最小单位信息

HTTP/2采用二进制格式传输数据，而非HTTP1.x的文本格式，解析高效

将请求和响应数据分割为更小的帧，并且它们采用二进制编码

HTTP/2中，同域名下所有通信都在单个连接上完成，该连接可以承载任意数量的双向数据流

每个数据流都以消息的形式发送，而消息又由一个或多个帧组成，多个帧之间可以乱序发送，根据帧首部的流标识可以重新组装，这也是多路复用同时发送数据的实现条件

#### 首部压缩
HTTP/2在客户端和服务端使用首部表来跟踪和存储之前发送的键值对，对于相同的数据，不再通过每次请求和响应发送

首部表在HTTP/2的连接续期内始终存在，有客户端和服务器共同渐进地更新

#### 服务器推送
HTTP/2引入服务器推送，允许服务器推送资源给客户端

服务器会顺便把一些客户端需要的资源一起推送到客户端，如在响应一个页面请求中，就可以随同页面的其它资源，免得客户端再次创建连接发送请求到服务端获取

这种方式非常合适加载静态资源

